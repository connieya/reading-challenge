# 27ì¼ì°¨ : 2023-09-06 (p.361 ~ 373)

## ìš”ì•½

ë°˜ë³µ ì‘ì—…ì„ ìº¡ìŠí™” í•˜ë ¤ëŠ” ë°©ë²•ë„ ì¼ì¢…ì˜ ë””ìì¸ íŒ¨í„´ìœ¼ë¡œ **ë°˜ë³µì(iterator)** íŒ¨í„´ì´ë¼ê³  ë¶€ë¥¸ë‹¤.

ë°˜ë³µì íŒ¨í„´ì´ Iterator ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•œë‹¤.

![iterator](iterator.png)

- hasNext() ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ë°˜ë³µ ì‘ì—…ì„ ì ìš©í•  ëŒ€ìƒì´ ë” ìˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
- next() ë©”ì†Œë“œëŠ” ë‹¤ìŒ ê°ì²´ë¥¼ ë¦¬í„´í•œë‹¤.

ì´ ì¸í„°í˜ì´ìŠ¤ê°€ ìˆìœ¼ë©´ ë°°ì—´, ë¦¬ìŠ¤íŠ¸ ,í•´ì‹œí…Œì´ë¸”ì€ ë¬¼ë¡ ,  ëª¨ë“  ì¢…ë¥˜ì˜ ê°ì²´ ì»¬ë ‰ì…˜ì— ë°˜ë³µìë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

DinerMenu ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë°°ì—´ Iterator ì¸í„°í˜ì´ìŠ¤ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

![iterator](iterator2.png)
DinerMenuIterator ëŠ” Iterator ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¡œ, MenuItemì´ ë“¤ì–´ìˆëŠ” ë°°ì—´ì„ ëŒ€ìƒìœ¼ë¡œ

ë°˜ë³µ ì‘ì—…ì„ í•˜ëŠ” ë° í•„ìš”í•œ ë©”ì†Œë“œë¥¼ ì œê³µí•œë‹¤.

**ê°ì²´ë§ˆì„ ì‹ë‹¹ ë©”ë‰´ì— ë°˜ë³µì ì¶”ê°€í•˜ê¸°**

Iterator ì¸í„°í˜ì´ìŠ¤ ì •ì˜í•˜ê¸°

```java
public interface Iterator {
    boolean hasNext();
    MenuItem next();
}
```

DinerMenu í´ë˜ìŠ¤ì— ì‚¬ìš©í•  êµ¬ìƒ Iterator í´ë˜ìŠ¤

```java
public class DinerMenuIterator implements Iterator {
    MenuItem[] items;
    int position = 0;

    public DinerMenuIterator(MenuItem[] items) {
        this.items = items;
    }

    @Override
    public boolean hasNext() {
        if (position >= items.length || items[position] == null) return false;
        return true;
    }

    @Override
    public MenuItem next() {
        MenuItem menuItem = items[position];
        position++;
        return menuItem;
    }
}
```

**ê°ì²´ë§ˆì„ ì‹ë‹¹ ë©”ë‰´ì—ì„œ ë°˜ë³µì ì‚¬ìš©í•˜ê¸°**

```java
public class DinerMenu {
    static final int MAX_ITEMS = 6;
    int numberOfItems = 0;
    MenuItem[] menuItems;

    public DinerMenu() {
        menuItems = new MenuItem[MAX_ITEMS];

        addItem("ì±„ì‹ ì£¼ì˜ììš© BLT" , "í†µë°€ ìœ„ì— ì½©ê³ ê¸° ë² ì´ì»¨ , ìƒì¶” , í† ë§ˆí† ë¥¼ ì–¹ì€ ë©”ë‰´", true, 2.99);
    }

    private void addItem(String name, String description, boolean vegetarian, double price) {
        MenuItem menuItem = new MenuItem(name,description,vegetarian,price);
        if (numberOfItems >= MAX_ITEMS){
            System.out.println("ì£„ì†¡í•©ë‹ˆë‹¤. ë©”ë‰´ê°€ ê½‰ ì°¼ìŠµë‹ˆë‹¤. ë” ì´ìƒ ì¶”ê°€í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }else {
            menuItems[numberOfItems] = menuItem;
            numberOfItems++;
        }
    }
    // ë” ì´ìƒ í•„ìš” ì—†ë‹¤. ë‚´ë¶€ êµ¬ì¡°ë¥¼ ë‹¤ ë“œëŸ¬ë‚´ëŠ” ë‹¨ì ì´ ìˆì–´ì„œ ì—†ì• ëŠ”ê²Œ ë‚«ë‹¤.
//    public MenuItem[] getMenuItems() {
//        return menuItems;
//    }
    
    public Iterator createIterator(){
        return new DinerMenuIterator(menuItems);
    }
}
```

createIterator() ë©”ì†Œë“œ

- menuItems ë°°ì—´ì„ ê°€ì§€ê³  DinerMenuIterator ë¥¼ ìƒì„±í•œ ë‹¤ìŒ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë¦¬í„´í•œë‹¤.
- Iteraotor ì¸í„°í˜ì´ìŠ¤ë¥¼ ë¦¬í„´í•œë‹¤.

**ì¢…ì—…ì› ì½”ë“œì— ë°˜ë³µì ì ìš©í•˜ê¸°**

```java
public class Waitress {
    PancakeHouseMenu pancakeHouseMenu;
    DinerMenu dinerMenu;

    public Waitress(PancakeHouseMenu pancakeHouseMenu, DinerMenu dinerMenu) {
        this.pancakeHouseMenu = pancakeHouseMenu;
        this.dinerMenu = dinerMenu;
    }
    
    public void printMenu(){
        Iterator pancakeIterator = pancakeHouseMenu.createIterator();
        Iterator dinerIterator = dinerMenu.createIterator();

        System.out.println("ë©”ë‰´ \n ---- \n ì•„ì¹¨ ë©”ë‰´");
        printMenu(pancakeIterator);
        System.out.println("\n ì ì‹¬ ë©”ë‰´");
        printMenu(dinerIterator);
    }

    private void printMenu(Iterator iterator) {
        while (iterator.hasNext()) {
            MenuItem menuItem = iterator.next();
            System.out.println(menuItem.getName()+" ,");
            System.out.println(menuItem.getPrice()+" --");
            System.out.println(menuItem.getDescription());
        }
    }
}
```

**ì¢…ì—…ì› ì½”ë“œ í…ŒìŠ¤íŠ¸**

```java
public class MenuTestDrive {
    public static void main(String[] args) {
        PancakeHouseMenu pancakeHouseMenu = new PancakeHouseMenu();
        DinerMenu dinerMenu = new DinerMenu();

        Waitress waitress = new Waitress(pancakeHouseMenu, dinerMenu);
        waitress.printMenu();
    }
}
```

**ë°˜ë³µì íŒ¨í„´ì˜ íŠ¹ì§• ì•Œì•„ë³´ê¸°**

ê´€ë¦¬í•˜ê¸° í˜ë“  ì¢…ì—…ì› ì½”ë“œ

- ë©”ë‰´ê°€ ìº¡ìŠí™”ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤. ê°ì²´ë§ˆì„ ì‹ë‹¹ì—ì„œëŠ” ë°°ì—´ì„ ì“°ê³  íŒ¬ì¼€ì´í¬ í•˜ìš°ìŠ¤ì—ì„œëŠ” ArrayList ë¥¼ ì“´ë‹¤ëŠ” ì‚¬ì‹¤ì„ ëˆ„êµ¬ë‚˜ ë‹¤ ì•Œìˆ˜ ìˆë‹¤.
- MenuItems ì„ ëŒ€ìƒìœ¼ë¡œ ë°˜ë³µ ì‘ì—…ì„ í•˜ë ¤ë©´ 2ê°œì˜ ìˆœí™˜ë¬¸ì´ í•„ìš”í•˜ë‹¤.
- ì¢…ì—…ì›ì´ êµ¬ìƒ í´ë˜ìŠ¤(MenuItem[] , ArrayList)ì— ì§ì ‘ ì—°ê²°ë˜ì–´ ìˆë‹¤.
- ìœ ì‚¬í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê°€ì¡ŒìŒì—ì˜« 2ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ êµ¬ìƒ ë©”ë‰´ í´ë˜ìŠ¤ì— ë¬¶ì—¬ ìˆë‹¤.

Iteratorê°€ ì¥ì°©ëœ ì‹ í˜• ì¢…ì—…ì› ì½”ë“œ

- ë©”ë‰´ êµ¬í˜„ë²•ì´ ìº¡ìŠí™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì¢…ì—…ì›ì€ ë©”ë‰´ì—ì„œ ë©”ë‰´ í•­ëª©ì˜ ì»¬ë ‰ì…˜ì„ ì–´ë–¤ ì‹ìœ¼ë¡œ ì €ì¥í•˜ëŠ”ì§€ ì „í˜€ ì•Œ ìˆ˜ê°€ ì—†ë‹¤.
- ë°˜ë³µìë§Œ êµ¬í˜„í•œë‹¤ë©´ ë‹¤í˜•ì„±ì„ í™œìš©í•´ì„œ ì–´ë–¤ ì»¬ë ‰ì…˜ì´ë“  1ê°œì˜ ìˆœí™˜ë¬¸ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
- ì¢…ì—…ì›ì€ ì¸í„°í˜ì´ìŠ¤ë§Œ ì•Œë©´ ëœë‹¤.

**í†µí•© ì‹ë‹¹ ì½”ë“œ ë‹¤ì‹œ ì‚´í´ë³´ê¸°**

![iterator](iterator3.png)

- ë°˜ë³µì ë•ë¶„ì— Waitress í´ë˜ìŠ¤ê°€ ì‹¤ì œë¡œ êµ¬í˜„ëœ êµ¬ìƒ í´ë˜ìŠ¤ë¡œë¶€í„° ë¶„ë¦¬ë˜ì—ˆë‹¤.
    - Menuê°€ ë°°ì—´ë¡œ êµ¬í˜„ë˜ì–´ìˆëŠ”ì§€, ArrayList ë¡œ êµ¬í˜„ë˜ì—ˆëŠ”ì§€ ì „í˜€ ì‹ ê²½ ì“¸ í•„ìš”ê°€ ì—†ë‹¤.
- ë°˜ë³µìë¥¼ ì‚¬ìš©í•˜ë©´ ê·¸ ì•ˆì— ë“¤ì–´ìˆëŠ” ëª¨ë“  í•­ëª©ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•˜ë ¤ê³  ì—¬ëŸ¬ ë©”ì†Œë“œë¥¼ ì™¸ë¶€ì— ë…¸ì¶œì‹œí‚¤ì§€ ì•Šìœ¼ë©´ì„œë„, ì»¬ë ‰ì…˜ì— ë“¤ì–´ìˆëŠ” ëª¨ë“  ê°ì²´ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

**java.util.Iterator ì ìš©í•˜ê¸°**

PancakeHouseMenuIterator í´ë˜ìŠ¤ë¥¼ ì§€ì›Œë²„ë¦¬ê³  PancakeHouseMenu ì½”ë“œ ë§¨ ìœ„ì—

java.util.Iterator ë¥¼ ì¶”ê°€í•œ ë‹¤ìŒ 1ì¤„ì˜ ì½”ë“œë§Œ ê³ ì¹˜ì

```java
public java.util.Iterator<MenuItem> createIterator(){
        return menuItems.iterator();
    }
```

**ë³€ê²½ëœ í†µí•© ì‹ë‹¹ ì½”ë“œ ì‚´í´ë³´ê¸°**

PancakeHouseMenu ì™€ DinerMenu í´ë˜ìŠ¤ì—ì„œ Menu ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œë‹¤.

Waitress í´ë˜ìŠ¤ì—ì„œ ê° ë©”ë‰´ ê°ì²´ë¥¼ ì°¸ì¡°í•  ë•ŒëŠ” êµ¬ìƒ í´ë˜ìŠ¤ ëŒ€ì‹  ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

![iterator](iterator4.png)


ìƒˆë¡œ ì •ì˜í•œ Menu ì¸í„°í˜ì´ìŠ¤ì—ëŠ” createIterator() ë©”ì†Œë“œë§Œ ìˆë‹¤.

PancakeHouseMenu ì™€ DinerMenu ì—ì„œ ëª¨ë‘ ì´ ë©”ì†Œë“œë¥¼ êµ¬í˜„í•œë‹¤.

**ë°˜ë³µì íŒ¨í„´ì˜ ì •ì˜**

<aside>
ğŸ’¡ **ë°˜ë³µì íŒ¨í„´(Iterator Pattern)** ì€ ì»¬ë ‰ì…˜ì˜ êµ¬í˜„ ë°©ë²•ì„ ë…¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´ì„œ ì§‘í•©ì²´ ë‚´ì˜ ëª¨ë“  í•­ëª©ì— ì ‘ê·¼í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•œë‹¤.

</aside>

ì´ íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ ì§‘í•©ì²´ ë‚´ì—ì„œ ì–´ë–¤ ì‹ìœ¼ë¡œ ì¼ì´ ì²˜ë¦¬ë˜ëŠ”ì§€ ì „í˜€ ëª¨ë¥´ëŠ” ìƒíƒœì—ì„œ ê·¸ ì•ˆì— ë“¤ì–´ìˆëŠ” ëª¨ë“  í•­ëª©ì„ ëŒ€ìƒìœ¼ë¡œ ë°˜ë³µ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.

**ë°˜ë³µì íŒ¨í„´ì˜ êµ¬ì¡° ì•Œì•„ë³´ê¸°**


![iterator](iterator5.png)

- Iterator ì¸í„°í˜ì´ìŠ¤ëŠ” ëª¨ë“  ë°˜ë³µìê°€ êµ¬í˜„í•´ì•¼ í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•˜ë©°, ì»¬ë ‰ì…˜ì— ë“¤ì–´ìˆëŠ” ì›ì†Œì— ëŒì•„ê°€ë©´ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•´ ì£¼ëŠ” ë©”ì†Œë“œë¥¼ ì œê³µí•œë‹¤.
- ConcreteIterator ëŠ” ë°˜ë³µ ì‘ì—… ì¤‘ì— í˜„ì¬ ìœ„ì¹˜ë¥¼ ê´€ë¦¬í•˜ëŠ” ì¼ì„ ë§¡ê³  ìˆë‹¤.
- ConcreteAggregate ì—ëŠ” ê°ì²´ ì»¬ë ‰ì…˜ì´ ë“¤ì–´ìˆìœ¼ë©°, ê·¸ ì•ˆì— ë“¤ì–´ìˆëŠ” ì»¬ë ‰ì…˜ì„ Iterator ë¡œ ë¦¬í„´í•˜ëŠ” ë©”ì†Œë“œë¥¼ êµ¬í˜„í•œë‹¤.

## ë°œì·Œ

> ì»¬ë ‰ì…˜ì€ ê°ì²´ë¥¼ ëª¨ì•„ ë†“ì€ ê²ƒì— ë¶ˆê³¼í•˜ë‹¤.
ë¦¬ìŠ¤íŠ¸, ë°°ì—´, í•´ì‹œí…Œì´ë¸”ê³¼ ê°™ì´ ë‹¤ì–‘í•œ ìë£Œêµ¬ì¡°ì— ì»¬ë ‰ì…˜ì„ ë³´ê´€í•  ìˆ˜ ìˆëŠ”ë° , ì–´ë–¤ ìë£Œêµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ë“  ê²°êµ­ ì»¬ë ‰ì…˜ì€ ì»¬ë ‰ì…˜ì´ë‹¤.
>

> ë°˜ë³µì íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ ë‚´ë¶€ êµ¬í˜„ ë°©ë²•ì„ ì™¸ë¶€ì— ë…¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´ì„œ ì§‘í•©ì²´ì— ìˆëŠ” ëª¨ë“  í•­ëª©ì— ì¼ì¼ì´ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.
>

> ë˜í•œ ê° í•­ëª©ì— ì¼ì¼ì´ ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•´ ì£¼ëŠ” ê¸°ëŠ¥ì„ ì§‘í•©ì²´ê°€ ì•„ë‹Œ ë°˜ë³µì ê°ì²´ê°€ ì±…ì„ì§„ë‹¤ëŠ” ì¥ì ë„ ìˆë‹¤.
>