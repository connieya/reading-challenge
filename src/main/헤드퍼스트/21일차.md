# 21ì¼ì°¨ : 2023-08-23 (p. 284 ~ 293)

## ìš”ì•½

**ì‹¤ì „ ì ìš©! ì–´ëŒ‘í„° íŒ¨í„´**

**Enumeration**

- Enumeration ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ì»¬ë ‰ì…˜ì˜ ê° í•­ëª©ì´ ì–´ë–»ê²Œ ê´€ë¦¬ë˜ëŠ” ì§€ ì‹ ê²½ ì“¸ í•„ìš” ì—†ì´ ì»¬ë ‰ì…˜ì˜ ëª¨ë“  í•­ëª©ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

**Iterator**

- Enumeration ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ì»¬ë ‰ì…˜ì— ìˆëŠ” ì¼ë ¨ì˜ í•­ëª©ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.
- Enumeration ê³¼ ë‹¬ë¦¬ ìš”ì†Œë¥¼ ì œê±°í•  ìˆ˜ ìˆëŠ” ë©”ì†Œë“œê°€ ìˆë‹¤.

**Enumeration ì„ Iteration ì— ì ì‘ì‹œí‚¤ê¸°**

![39](39.png)

ì–´ëŒ‘í„° ë””ìì¸í•˜ê¸°

- íƒ€ê¹ƒ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œë‹¤.
- ì–´ëŒ‘í‹° ê°ì²´ë¡œ êµ¬ì„±ëœ ì–´ëŒ‘í„°ë¥¼ êµ¬í˜„í•´ì•¼ í•œë‹¤.

hasNext() ì™€ next() ë©”ì†Œë“œëŠ” íƒ€ê¹ƒì—ì„œ ì–´ëŒ‘í‹°ë¡œ ë°”ë¡œ ì—°ê²°ëœë‹¤.

í•˜ì§€ë§Œ remove()ëŠ” ì–´ë–»ê²Œ ì²˜ë¦¬í•´ì•¼ í• ê¹Œ??

![40](40.png)

**remove() ë©”ì†Œë“œ ì²˜ë¦¬í•˜ê¸°**

Enumeration ì€ remove()ì— í•´ë‹¹í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤.

ì½ê¸° ì „ìš© ì¸í„°í˜ì´ìŠ¤ì´ë‹¤.

ì–´ëŒ‘í„° ì°¨ì›ì—ì„œ ì™„ë²½í•˜ê²Œ ë™ì‘í•˜ëŠ” remove() ë©”ì†Œë“œ êµ¬í˜„ ë°©ë²•ì€ ì—†ë‹¤.

ê·¸ë‚˜ë§ˆ ì¢‹ì€ ë°©ë²•ì€ ëŸ°íƒ€ì„ ì˜ˆì™¸ë¥¼ ë˜ì§€ëŠ” ê²ƒì´ë‹¤.

ë©”ì†Œë“œê°€ ì¼ëŒ€ì¼ë¡œ ëŒ€ì‘ë˜ì§€ ì•Šì€ ìƒí™©ì—ì„œëŠ” ì–´ëŒ‘í„°ë¥¼ ì™„ë²½í•˜ê²Œ ì ìš©í•  ìˆ˜ ì—†ë‹¤.

**EnumerationIterator ì–´ëŒ‘í„° ì½”ë“œ ë§Œë“¤ê¸°**

```java
public class EnumerationIterator implements Iterator<Object> {
    Enumeration<?> enumeration;

		//ì ì‘ì‹œì¼œì•¼ í•˜ëŠ” Enumeration ê°ì²´. êµ¬ì„±ì„ í™œìš©í•˜ê³  ìˆê¸°ì— ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì— ì €ì¥í•œë‹¤.
    public EnumerationIterator(Enumeration<?> enumeration) {
        this.enumeration = enumeration;
    }

    @Override
    public boolean hasNext() {
        return enumeration.hasMoreElements();
    }

    @Override
    public Object next() {
        return enumeration.nextElement();
    }
    
    public void remove() {
        throw new UnsupportedOperationException();
    }
}
```

- Enumerationì„ Iteratorì— ì ì‘ì‹œí‚¤ê³  ìˆê¸°ì— ì–´ëŒ‘í„°ëŠ” Iterator ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì•¼ í•œë‹¤. ê²‰ì—ì„œ ë´¤ì„ ë•Œ Iterator ì²˜ëŸ¼ ìƒê²¨ì•¼ í•˜ê¸° ë•Œë¬¸ì—
- Iteratorì˜ hasNext() ë©”ì†Œë“œëŠ” Enumeration ì˜ hasMoreElements() ë©”ì†Œë“œë¡œ ì—°ê²°ëœë‹¤.
- Iteratorì˜ next() ë©”ì†Œë“œëŠ” Enumeration ì˜ nextElement() ë©”ì†Œë“œë¡œ ì—°ê²°ëœë‹¤.
- Iterator ì˜ remove ë©”ì†Œë“œëŠ” ì§€ì›ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ê·¸ëƒ¥ ì˜ˆì™¸ë¥¼ ë˜ì§„ë‹¤.

**í¼ì‚¬ë“œ íŒ¨í„´ ë§›ë³´ê¸°**

ì–´ëŒ‘í„° íŒ¨í„´ì€ ì–´ë–¤ í´ë˜ìŠ¤ì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ í´ë¼ì´ì–¸íŠ¸ê°€ ì›í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì´ë‹¤.

í¼ì‚¬ë“œ íŒ¨í„´ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë‹¨ìˆœí•˜ê²Œ ë°”ê¾¸ë ¤ê³  ì¸í„°í˜ì´ìŠ¤ë¥¼ ë³€ê²½í•œë‹¤.

**í™ˆì‹œì–´í„° ë§Œë“¤ê¸°**

í™ˆì‹œì–´í„° êµ¬ì¶•í•˜ê¸°

ìŠ¤íŠ¸ë¦¬ë° í”Œë ˆì´ì–´, í”„ë¡œì í„° , ìë™ ìŠ¤í¬ë¦° , ì„œë¼ìš´ë“œ ìŒí–¥, íŒì½˜ ê¸°ê³„

![41](41.png)


**ë³µì¡í•œ ë°©ë²•ìœ¼ë¡œ ì˜í™” ë³´ê¸°**

1. íŒì½˜ ê¸°ê³„ë¥¼ ì¼ ë‹¤.
2. íŒì½˜ì„ íŠ€ê¸°ê¸° ì‹œì‘í•œë‹¤.
3. ì¡°ëª…ì„ ì–´ë‘¡ê²Œ ì¡°ì ˆí•œë‹¤.
4. ìŠ¤í¬ë¦°ì„ ë‚´ë¦°ë‹¤.
5. í”„ë¡œì í„°ë¥¼ ì¼ ë‹¤.
6. í”„ë¡œì í„° ì…ë ¥ì„ ìŠ¤íŠ¸ë¦¬ë° í”Œë ˆì´ì–´ë¡œ ì„¤ì •í•œë‹¤.
7. í”„ë¡œì í„°ë¥¼ ì™€ì´ë“œ ìŠ¤í¬ë¦° ëª¨ë“œë¡œ ì „í™˜í•œë‹¤.
8. ì•°í”„ë¥¼ ì¼ ë‹¤.
9. ì•°í”„ ì…ë ¥ì„ ìŠ¤íŠ¸ë¦¬í•‘ í”Œë ˆì´ì–´ë¡œ ì„¤ì •í•œë‹¤.
10. ì•°í”„ë¥¼ ì„œë¼ìš´ë“œ ìŒí–¥ ëª¨ë“œë¡œ ì „í™˜í•œë‹¤.
11. ì•°í”„ ë³¼ë¥¨ì„ ì¤‘ê°„(5) ìœ¼ë¡œ ì„¤ì •í•œë‹¤.
12. ìŠ¤íŠ¸ë¦¬ë° í”Œë ˆì´ì–´ë¥¼ ì¼ ë‹¤.
13. ì˜í™”ë¥¼ ì¬ìƒí•œë‹¤.

```java
popper.on();
popper.pop();

lights.dim(10);

scree.down();

projector.on();
projector.setInput(player);
projector.wideScreenMode();

amp.on();
amp.setDvd(player);
amp.setSurroundSound();
amp.setVolume(5);

player.on();
player.play(movie);
```

í™ˆì‹œì–´í„° ì‚¬ìš©ë²•ì´ ë„ˆë¬´ ë³µì¡í•˜ë‹¤.

í¼ì‚¬ë“œ íŒ¨í„´ìœ¼ë¡œ ê°„ë‹¨í•˜ê²Œ ì²˜ë¦¬ í•  ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ??

## ë°œì·Œ

**UnsupportedOperationException**

> ìë°”ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ ì¤‘ í•˜ë‚˜ë¡œ, ë©”ì†Œë“œê°€ í˜¸ì¶œë˜ì—ˆì„ ë•Œ í•´ë‹¹ ë©”ì†Œë“œê°€ ì§€ì›ë˜ì§€ ì•ŠëŠ” ê²½ìš°ì— ë°œìƒí•œë‹¤.
>

ì£¼ë¡œ ì¶”ìƒ í´ë˜ìŠ¤ë‚˜ ì¸í„°í˜ì´ìŠ¤ì—ì„œ íŠ¹ì • ë©”ì†Œë“œì˜ êµ¬í˜„ì´ ì—†ëŠ” ê²½ìš°ë‚˜ ìì‹ í´ë˜ìŠ¤ì—ì„œ ì˜¤ë²„ë¼ì´ë”©í•˜ì§€ ì•Šì€ ê²½ìš° ë°œìƒí•œë‹¤.

## ë©”ëª¨

**Enumeration ê³¼ lterator**

:  Java ì—ì„œ ì»¬ë ‰ì…˜ ìš”ì†Œë¥¼ ë°˜ë³µí•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ì¸í„°í˜ì´ìŠ¤

**Enumeration**

- JDK 1.0 ë¶€í„° ë„ì…ë˜ì—ˆê³  , ì´ì „ ë²„ì „ì˜ Java ì—ì„œ ì£¼ë¡œ ì‚¬ìš©ë˜ì—ˆë‹¤.
- Vector ë‚˜ Hashtable ê³¼ ê°™ì€ êµ¬ì‹ ì»¬ë ‰ì…˜ í´ë˜ìŠ¤ì—ì„œ ì‚¬ìš©ëœë‹¤.

```java
public class EnumerationExample {
    public static void main(String[] args) {
        Vector<Integer> numbers  =  new Vector<>();
        numbers.add(1);
        numbers.add(2);
        numbers.add(3);

        Enumeration<Integer> enumeration = numbers.elements();
        while (enumeration.hasMoreElements()) {
            System.out.println(enumeration.nextElement());
        }
    }
}
```

**Iterator**

- JDK 1.2 ë¶€í„° ë„ì…ë˜ì—ˆê³  , ë³´ë‹¤ ì¼ë°˜ì ì¸ ì»¬ë ‰ì…˜ í´ë˜ìŠ¤ì—ì„œ ì‚¬ìš©ëœë‹¤.
- Iterator ëŠ” ë” ìœ ì—°í•˜ë©°, ìˆ˜ì • ê°€ëŠ¥í•œ ì»¬ë ‰ì…˜ì„ ë°˜ë³µí•˜ë©´ì„œ ìš”ì†Œë¥¼ ì œê±°í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œë¥¼ ì œê³µí•œë‹¤.

```java
public class IteratorExample {
    public static void main(String[] args) {
        List<String> fruits = new ArrayList<>();
        fruits.add("Apple");
        fruits.add("Banana");
        fruits.add("Orange");

        Iterator<String> iterator = fruits.iterator();
        while (iterator.hasNext()) {
            String fruit = iterator.next();
            System.out.println(fruit);
            if (fruit.equals("Banana")) {
                iterator.remove();
            }
        }

        System.out.println(fruits);
    }

}
```

**ì°¨ì´ì **

- **ê¸°ëŠ¥ ë° íŠ¹ì§•** :  Iterator ëŠ” Enumeration ë³´ë‹¤ ë” ë§ì€ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.  ì˜ˆë¥¼ ë“¤ì–´, Iterator ëŠ” ìš”ì†Œë¥¼ ì œê±°í•  ìˆ˜ ìˆëŠ” remove() ë©”ì„œë“œë¥¼ ì§€ì›í•œë‹¤.  ë°˜ë©´ì— Enumeration ì€ ì½ê¸° ì „ìš©ì´ë©°, ìš”ì†Œë¥¼ ì œê±°í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œê°€ ì—†ë‹¤.
- **Fail-Fast** :   Iterator ë¥¼ ì‚¬ìš©í•˜ëŠ” ì»¬ë ‰ì…˜ì€ ë³´í†µ fail-fast ë°©ì‹ì„ ë”°ë¥¸ë‹¤. ì¦‰, ì»¬ë ‰ì…˜ì˜ ë‚´ìš©ì´ ìˆ˜ì •ë˜ë©´ ì˜ˆì™¸ê°€ ë°œìƒí•˜ì—¬ ë‹¤ë¥¸ ìŠ¤ë ˆë“œì—ì„œ ì»¬ë ‰ì…˜ì„ ë³€ê²½í•˜ë ¤ëŠ” ì‹œë„ë¥¼ ê°ì§€í•œë‹¤. â€˜Enumerationâ€™ ì€ì´ëŸ¬í•œ ë™ì‹œ ìˆ˜ì •ì„ ê°ì§€í•˜ì§€ ì•ŠëŠ”ë‹¤.
- **ë°ì´í„° íƒ€ì…** : Enumeration ì€ ì œë„¤ë¦­ íƒ€ì…ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤.  ë”°ë¼ì„œ ìš”ì†Œë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ í˜•ë³€í™˜ì„ í•´ì•¼ í•œë‹¤. ë°˜ë©´ì— IteratorëŠ” ì œë„¤ë¦­ì„ í™œìš©í•˜ì—¬ íƒ€ì… ì•ˆì „ì„±ì„ ë³´ì¥í•œë‹¤.

â€»Fail-Fast

<aside>
ğŸ’¡ í”„ë¡œê·¸ë¨ì—ì„œ ì ì¬ì ì¸ ë¬¸ì œë¥¼ ë¹ ë¥´ê²Œ ê°ì§€í•˜ê³  ì¦‰ì‹œ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œì¼œ í”„ë¡œê·¸ë¨ì˜ ì•ˆì •ì„±ì„ í™•ë³´í•˜ëŠ” ë””ìì¸ ì›ì¹™ ë˜ëŠ” íŒ¨í„´

</aside>

- **ë‹¤ì¤‘ ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œì˜ ì•ˆì „ì„±** : ì»¬ë ‰ì…˜ì„ ì—¬ëŸ¬ ìŠ¤ë ˆë“œì—ì„œ ë™ì‹œì— ìˆ˜ì •í•˜ë ¤ê³  í•  ë•Œ, â€œFail-Fastâ€ ë°©ì‹ì€ ë‹¤ë¥¸ ìŠ¤ë ˆë“œì—ì„œ ì»¬ë ‰ì…˜ì„ ìˆ˜ì •í•˜ëŠ” ë™ì‘ì„ ê°ì§€í•˜ê³  ì¦‰ì‹œ â€˜ConcurrentModificationExceptionâ€™ ê³¼ ê°™ì€ ì˜ˆì™¸ë¥¼ ë°œìƒ ì‹œì¼œ í•´ë‹¹ ìˆ˜ì •ì„ ë§‰ëŠ”ë‹¤.
- **ë°ì´í„° ë¬´ê²°ì„± í™•ë³´** : ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ì»¬ë ‰ì…˜ì„ ìˆ˜ì •í•˜ê±°ë‚˜ ìš”ì†Œë¥¼ ë³€ê²½í•˜ë ¤ëŠ” ì‹œë„ë¥¼ ë°©ì§€í•˜ì—¬ ë°ì´í„°ì˜ ë¬´ê²°ì„±ì„ ë³´í˜¸í•©ë‹ˆë‹¤. ì´ë¡œì¨ í”„ë¡œê·¸ë¨ì˜ ì˜ˆê¸°ì¹˜ ì•Šì€ ë™ì‘ì´ë‚˜ ë°ì´í„° ì†ìƒì„ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.
- **ë¬¸ì œ ì¡°ê¸° ë°œê²¬** :  â€œFail-Fastâ€ ë°©ì‹ì€ ë¬¸ì œê°€ ë°œìƒí•œ ì§€ì ì„ ë¹ ë¥´ê²Œ ê°ì§€í•˜ê³  í•´ë‹¹ ì§€ì ì—ì„œ ì˜ˆì™¸ë¥¼ ë°œìƒ ì‹œí‚´ìœ¼ë¡œì¨ ë¬¸ì œì˜ ê·¼ë³¸ ì›ì¸ì„ ì¡°ê¸°ì— ë°œê²¬í•˜ì—¬ ë””ë²„ê¹…ì„ ìš©ì´í•˜ê²Œ í•œë‹¤.

javaì˜ ì»¬ë ‰ì…˜ì€ modCount ë¼ëŠ” ë‚´ë¶€ì˜ counterë¥¼ ìš´ìš©í•œë‹¤. Collectionì— itemì´ ì¶”ê°€ë˜ê±°ë‚˜

ì œê±°ë  ë•Œë§ˆë‹¤ ì´ modCount ë¼ ë¶ˆë¦¬ëŠ” ì¹´ìš´í„°ê°€ ì¦ê°€í•œë‹¤.  iterating  ì¤‘ì— next()ë¥¼ í˜¸ì¶œ í•  ë•Œ ë§ˆë‹¤ í˜„ ìƒí™©ì˜ modCount ê°’ì„ ì´ˆê¸°ì˜ ê°’ê³¼ ë¹„êµí•œë‹¤.  ì´ë•Œ ì¡°ê¸ˆì´ë¼ë„ ë‹¤ë¥´ë‹¤ë©´ ì¦‰ì‹œ ConcurrentModificationException ì„ throw í•˜ê³  ì „ì²´ ì‘ì—…ì„ ì¤‘ë‹¨í•œë‹¤.

ArrayList , HashMap ë“±ê³¼ ê°™ì€ java.util íŒ¨í‚¤ì§€ì˜ ì»¬ë ‰ì…˜ì— ëŒ€í•œ ê¸°ë³¸ iterator ë“¤ì€ Fail-Fast ë°©ì‹ì´ë‹¤.

ì˜ˆ)  ìš”ì†Œ ì œê±°

```java
public class FailFastTest {
    public static void main(String[] args) {
        List<Integer> numbers = new ArrayList<>();
        numbers.add(1);
        numbers.add(2);
        numbers.add(3);
        for (Integer number : numbers) {
            numbers.remove(0);
        }
        System.out.println(numbers);
    }
}
```

â‡’  ì˜ˆì™¸ ë°œìƒ

**Exception in thread "main" java.util.ConcurrentModificationException
at java.base/java.util.ArrayList$Itr.checkForComodification(ArrayList.java:1013)
at java.base/java.util.ArrayList$Itr.next(ArrayList.java:967)**

ì˜ˆ) ìš”ì†Œ ì¶”ê°€

```java
public class FailFastTest {
    public static void main(String[] args) {
        List<Integer> numbers = new ArrayList<>();
        numbers.add(1);
        numbers.add(2);
        numbers.add(3);
        for (Integer number : numbers) {
            numbers.add(20);
        }
        System.out.println(numbers);
    }
}
```

â‡’  ì˜ˆì™¸ ë°œìƒ

**Exception in thread "main" java.util.ConcurrentModificationException
at java.base/java.util.ArrayList$Itr.checkForComodification(ArrayList.java:1013)
at java.base/java.util.ArrayList$Itr.next(ArrayList.java:967)**

ì˜ˆ) Iterator ì˜ remove

```java
public class FailFastTest {
    public static void main(String[] args) {
        List<Integer> numbers = new ArrayList<>();
        numbers.add(1);
        numbers.add(2);
        numbers.add(3);
        Iterator<Integer> iterator = numbers.iterator();
        while (iterator.hasNext()){
            System.out.println(iterator.next());
            iterator.remove();
        }
        System.out.println(numbers);
    }
}
```

ì˜ˆì™¸ê°€ ë°œìƒí•˜ì§€ ì•ŠìŒ

ì˜ˆ) Iterator  ìš”ì†Œ ì¶”ê°€

```java
public class FailFastTest {
    public static void main(String[] args) {
        List<Integer> numbers = new ArrayList<>();
        numbers.add(1);
        numbers.add(2);
        numbers.add(3);
        Iterator<Integer> iterator = numbers.iterator();
        while (iterator.hasNext()){
            System.out.println(iterator.next());
            numbers.add(20);
        }
        System.out.println(numbers);
    }
}
```

â‡’ ì˜ˆì™¸ ë°œìƒ

**Exception in thread "main" java.util.ConcurrentModificationException
at java.base/java.util.ArrayList$Itr.checkForComodification(ArrayList.java:1013)
at java.base/java.util.ArrayList$Itr.next(ArrayList.java:967)**

FailSafe Test

```java
public class FailSafeTest {
    public static void main(String[] args) {
        ConcurrentHashMap<String, Integer> map = new ConcurrentHashMap<>();
        map.put("First", 10);
        map.put("Second", 20);
        map.put("Third", 30);
        map.put("Fourth", 40);
        Iterator<String> iterator = map.keySet().iterator();
        while (iterator.hasNext()){
            String key = iterator.next();
            map.put(key,50);
        }
        System.out.println(map);
    }
}
```

ì¶œë ¥:

{Second=50, Third=50, First=50, Fourth=50}
