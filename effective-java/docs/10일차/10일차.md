# 10일차  2024-04-30  p.73 ~ 76

## 아이템 12 toString 을 항상 재정의하라

Object 의 기본 toString 메서드가 우리가 작성한 클래스에 적합한 문자열을 반환하는 경우는 거의 없다.
이 메서드는 **PhoneNumber@abbd 처럼 단순히 클래스_이름@16진수로_표시한_해시코드** 를 반환할 뿐이다. 

toString 의 일반 규약에 따르면 '간결하면서 사람이 읽기 쉬운 형태의 유익한 정보'를 반환해야 한다.

PhoneNumber@adbbd 는 간결하고 읽기 쉽다고 볼 수도 있지만, 707-867-5309 처럼  전화번호를 직접 알려주는 형태가 훨씬 유익한 정보를 담고 있다.

또한 toString 의 규약은 "모든 하위 클래스에서 이 메서드를 재정의하라"고 한ㄷ ㅏ.
정말 새겨들어야 할 조언이다!

equals 와 hashCode 규약 만큼 대단히 중요하진 않지만, toString 을 잘 구현한 클래스는 사용하기에 훨씬 즐겁고, 그 클래스를 사용한
시스템은 디버깅하기 쉽다. toString 메서드는 객체를 println , printf , 문자열 연결 연산자(+) , assert 구문에 넘길 때 
혹은 디버거가 객체를 출력할 때 자동으로 불린다. 여러분이 직접 호출하지 않더라도 다른 어딘가에서 쓰일 거란 이야기다. 
예컨대 여러분이 작성한 객체를 참조하는 컴포넌ㅌ느가 오류 메시지를 로깅할 때 자동으로 호출할 수 있다.
toString 을 제대로 정의하지 않는다면 쓸모없는 메시지만 로그에 남을 것이다. 

좋은 toString 은 (특히 컬렉션처럼) 이 인스턴스를 포함하는 객체에서 유용하게 쓰인다.  map 객체를 출력했을 때
{Jenny = PhoneNumber@adbbd } 보다는 {Jenny = 707-867-5309 } 라는 메시지가 나오는 게 훨씬 반갑지 않겠는가?

실전에서 toString 은 그 객체가 가진 주요 정보 모두를 반환하는 게 좋다. 앞서의 전화번호처럼 말이다. 

하지만 객체가 거대하거나 객체의 상태가 문자열로 표현하기에 적합하지 않다면 무리가 있다.

요약 정보를 담아야 한다. 이상적으로는 스스로를 완벽히 설명하는 문자열이어야 한다.

toString 을 구현할 때면 반환값의 포맷을 문서화할 지 정해야 한다.
이는 아주 중요한 선택이다. 전화번호나 행렬 같은 값 클래스라면 문서화하기를 권한다.
포맷을 명시하면 그 객체는 표준적이고 , 명확하고, 사람이 읽을 수 있게 된다. 따라서 그 값 그대로 입출력에 사용하거나 CSV 파일처럼
사람이 읽을 수 있는 데이터 객체로 저장할 수도 있다. 

포맷을 명시하기로 했다면, 명시한 포맷에 맞는 문자열과 객체를 상화 전환할 수 있는 정적 팩토리나 생성자를 함께 제공해주면 좋다.

단점도 있다. 포맷을 한번 명시하면 평생 그 포맷에 얽매이게 된다. 이를 사용하는 프로그래머들이 그 포멧에 맞춰 파싱하고,
새로운 객체를 마들고, 영속 데이터로 저장하는 코드를 작성할 것이다.



**포맷을 명시하든 아니든 여러분의 의도는 명확히 밝혀야 한다.**  포맷을 명시하려면 아주 정확하게 해야 한다.

포맷 명시 여부와 상관없이 **toString 이 반환한 값에 포함된 정보를 얻어 올 수 있는 API 를 제공하자** 

예컨대 PhoneNumber 클래스는 지역 코드, 프리픽스, 가입자 번호용 접근자를 제공해야 한다. 
그렇지 않으면 이 정보가 필요한 프로그래머는 toString 의 반환값을 파싱할 수 밖에 없다.  성능이 나빠지고, 필요하지도 않은 작업이다.
게다가 향후 포맷을 바꾸면 시스템이 망가지는 결과를 초래할 수 있다. 

정적 유틸리티 클래스는 toString 을 제공할 이유가 없다.
또한, 대부분의 열거 타입도 자바가 이미 완벽한 toString 을 제공하니 따로 재정의하지 않아도 된다. 
하지만 하위 클래스들이 공유해야 할 문자열 표현이 있는 추상 클래스라면 toString 을 재정의해줘야 한다.
예컨대 대다수의 컬렉션 구현체는 추상 컬렉션 클래스들의 toString 메서드를 상속해 쓴다.